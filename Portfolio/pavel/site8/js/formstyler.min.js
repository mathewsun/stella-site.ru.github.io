/* jQuery Form Styler v1.6.4 | (c) Dimox | https://github.com/Dimox/jQueryFormStyler */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.fn.styler=function(t){var s=e.extend({wrapper:"form",idSuffix:"-styler",filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",selectPlaceholder:"Выберите...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0,onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}},t);return this.each(function(){function t(){var e="",t="",i="",o="";void 0!==l.attr("id")&&""!==l.attr("id")&&(e=' id="'+l.attr("id")+s.idSuffix+'"'),void 0!==l.attr("title")&&""!==l.attr("title")&&(t=' title="'+l.attr("title")+'"'),void 0!==l.attr("class")&&""!==l.attr("class")&&(i=" "+l.attr("class"));var a,d=l.data();for(a in d)""!==d[a]&&(o+=" data-"+a+'="'+d[a]+'"');this.id=e+o,this.title=t,this.classes=i}var l=e(this),i=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?!0:!1,o=navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?!0:!1;l.is(":checkbox")?l.each(function(){if(1>l.parent("div.jq-checkbox").length){var s=function(){var s=new t,i=e("<div"+s.id+' class="jq-checkbox'+s.classes+'"'+s.title+'><div class="jq-checkbox__div"></div></div>');l.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(i).prependTo(i),i.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"}),l.is(":checked")&&i.addClass("checked"),l.is(":disabled")&&i.addClass("disabled"),i.on("click.styler",function(){return i.is(".disabled")||(l.is(":checked")?(l.prop("checked",!1),i.removeClass("checked")):(l.prop("checked",!0),i.addClass("checked")),l.change()),!1}),l.closest("label").add('label[for="'+l.attr("id")+'"]').click(function(t){e(t.target).is("a")||(i.click(),t.preventDefault())}),l.on("change.styler",function(){l.is(":checked")?i.addClass("checked"):i.removeClass("checked")}).on("keydown.styler",function(e){32==e.which&&i.click()}).on("focus.styler",function(){i.is(".disabled")||i.addClass("focused")}).on("blur.styler",function(){i.removeClass("focused")})};s(),l.on("refresh",function(){l.off(".styler").parent().before(l).remove(),s()})}}):l.is(":radio")?l.each(function(){if(1>l.parent("div.jq-radio").length){var i=function(){var i=new t,o=e("<div"+i.id+' class="jq-radio'+i.classes+'"'+i.title+'><div class="jq-radio__div"></div></div>');l.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(o).prependTo(o),o.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"}),l.is(":checked")&&o.addClass("checked"),l.is(":disabled")&&o.addClass("disabled"),o.on("click.styler",function(){return o.is(".disabled")||(o.closest(s.wrapper).find('input[name="'+l.attr("name")+'"]').prop("checked",!1).parent().removeClass("checked"),l.prop("checked",!0).parent().addClass("checked"),l.change()),!1}),l.closest("label").add('label[for="'+l.attr("id")+'"]').click(function(t){e(t.target).is("a")||(o.click(),t.preventDefault())}),l.on("change.styler",function(){l.parent().addClass("checked")}).on("focus.styler",function(){o.is(".disabled")||o.addClass("focused")}).on("blur.styler",function(){o.removeClass("focused")})};i(),l.on("refresh",function(){l.off(".styler").parent().before(l).remove(),i()})}}):l.is(":file")?l.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",opacity:0,margin:0,padding:0}).each(function(){if(1>l.parent("div.jq-file").length){var i=function(){var i=new t,o=l.data("placeholder");void 0===o&&(o=s.filePlaceholder);var a=l.data("browse");(void 0===a||""===a)&&(a=s.fileBrowse);var d=e("<div"+i.id+' class="jq-file'+i.classes+'"'+i.title+' style="display: inline-block; position: relative; overflow: hidden"></div>'),c=e('<div class="jq-file__name">'+o+"</div>").appendTo(d);e('<div class="jq-file__browse">'+a+"</div>").appendTo(d),l.after(d),d.append(l),l.is(":disabled")&&d.addClass("disabled"),l.on("change.styler",function(){var e=l.val();if(l.is("[multiple]"))for(var e="",t=l[0].files,s=0;s<t.length;s++)e+=(s>0?", ":"")+t[s].name;c.text(e.replace(/.+[\\\/]/,"")),""===e?(c.text(o),d.removeClass("changed")):d.addClass("changed")}).on("focus.styler",function(){d.addClass("focused")}).on("blur.styler",function(){d.removeClass("focused")}).on("click.styler",function(){d.removeClass("focused")})};i(),l.on("refresh",function(){l.off(".styler").parent().before(l).remove(),i()})}}):l.is("select")?l.each(function(){if(1>l.parent("div.jqselect").length){var a=function(){function a(t){t.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(t){var s=null;"mousewheel"==t.type?s=-1*t.originalEvent.wheelDelta:"DOMMouseScroll"==t.type&&(s=40*t.originalEvent.detail),s&&(t.stopPropagation(),t.preventDefault(),e(this).scrollTop(s+e(this).scrollTop()))})}function d(){for(var e=0,t=r.length;t>e;e++){var s="",l="",i=s="",o="",a="",d="";r.eq(e).prop("selected")&&(l="selected sel"),r.eq(e).is(":disabled")&&(l="disabled"),r.eq(e).is(":selected:disabled")&&(l="selected sel disabled"),void 0!==r.eq(e).attr("class")&&(o=" "+r.eq(e).attr("class"),d=' data-jqfs-class="'+r.eq(e).attr("class")+'"');var c,n=r.eq(e).data();for(c in n)""!==n[c]&&(i+=" data-"+c+'="'+n[c]+'"');""!==l+o&&(s=' class="'+l+o+'"'),s="<li"+d+i+s+">"+r.eq(e).html()+"</li>",r.eq(e).parent().is("optgroup")&&(void 0!==r.eq(e).parent().attr("class")&&(a=" "+r.eq(e).parent().attr("class")),s="<li"+d+i+' class="'+l+o+" option"+a+'">'+r.eq(e).html()+"</li>",r.eq(e).is(":first-child")&&(s='<li class="optgroup'+a+'">'+r.eq(e).parent().attr("label")+"</li>"+s)),h+=s}}function c(){var o=new t,c="",n=l.data("placeholder"),p=l.data("search"),f=l.data("search-limit"),u=l.data("search-not-found"),v=l.data("search-placeholder"),g=l.data("z-index"),b=l.data("smart-positioning");void 0===n&&(n=s.selectPlaceholder),(void 0===p||""===p)&&(p=s.selectSearch),(void 0===f||""===f)&&(f=s.selectSearchLimit),(void 0===u||""===u)&&(u=s.selectSearchNotFound),void 0===v&&(v=s.selectSearchPlaceholder),(void 0===g||""===g)&&(g=s.singleSelectzIndex),(void 0===b||""===b)&&(b=s.selectSmartPositioning);var m=e("<div"+o.id+' class="jq-selectbox jqselect'+o.classes+'" style="display: inline-block; position: relative; z-index:'+g+'"><div class="jq-selectbox__select"'+o.title+' style="position: relative"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>');l.css({margin:0,padding:0}).after(m).prependTo(m);var C=e("div.jq-selectbox__select",m),w=e("div.jq-selectbox__select-text",m),o=r.filter(":selected");d(),p&&(c='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+v+'"></div><div class="jq-selectbox__not-found">'+u+"</div>");var x=e('<div class="jq-selectbox__dropdown" style="position: absolute">'+c+'<ul style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+h+"</ul></div>");m.append(x);var y=e("ul",x),q=e("li",x),k=e("input",x),j=e("div.jq-selectbox__not-found",x).hide();q.length<f&&k.parent().hide(),""===l.val()?w.text(n).addClass("placeholder"):w.text(o.text());var _=0,S=0;q.each(function(){var t=e(this);t.css({display:"inline-block"}),t.innerWidth()>_&&(_=t.innerWidth(),S=t.width()),t.css({display:""})}),w.is(".placeholder")&&w.width()>_?w.width(w.width()):w.width(S),_>m.width()&&x.width(_),""===r.first().text()&&""!==l.data("placeholder")&&q.first().hide(),l.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});var T=m.outerHeight(),P=k.outerHeight(),A=y.css("max-height"),c=q.filter(".selected");1>c.length&&q.first().addClass("selected sel"),void 0===q.data("li-height")&&q.data("li-height",q.outerHeight());var z=x.css("top");return"auto"==x.css("left")&&x.css({left:0}),"auto"==x.css("top")&&x.css({top:T}),x.hide(),c.length&&(r.first().text()!=o.text()&&m.addClass("changed"),m.data("jqfs-class",c.data("jqfs-class")),m.addClass(c.data("jqfs-class"))),l.is(":disabled")?(m.addClass("disabled"),!1):(C.click(function(){if(e("div.jq-selectbox").filter(".opened").length&&s.onSelectClosed.call(e("div.jq-selectbox").filter(".opened")),l.focus(),!i){var t=e(window),o=q.data("li-height"),d=m.offset().top,c=t.height()-T-(d-t.scrollTop()),n=l.data("visible-options");(void 0===n||""===n)&&(n=s.selectVisibleOptions);var h=5*o,p=o*n;n>0&&6>n&&(h=p),0===n&&(p="auto");var n=function(){x.height("auto").css({bottom:"auto",top:z});var e=function(){y.css("max-height",Math.floor((c-20-P)/o)*o)};e(),y.css("max-height",p),"none"!=A&&y.css("max-height",A),c<x.outerHeight()+20&&e()},f=function(){x.height("auto").css({top:"auto",bottom:z});var e=function(){y.css("max-height",Math.floor((d-t.scrollTop()-20-P)/o)*o)};e(),y.css("max-height",p),"none"!=A&&y.css("max-height",A),d-t.scrollTop()-20<x.outerHeight()+20&&e()};return!0===b||1===b?c>h+P+20?(n(),m.removeClass("dropup").addClass("dropdown")):(f(),m.removeClass("dropdown").addClass("dropup")):(!1===b||0===b)&&c>h+P+20&&(n(),m.removeClass("dropup").addClass("dropdown")),m.offset().left+x.outerWidth()>t.width()&&x.css({left:"auto",right:0}),e("div.jqselect").css({zIndex:g-1}).removeClass("opened"),m.css({zIndex:g}),x.is(":hidden")?(e("div.jq-selectbox__dropdown:visible").hide(),x.show(),m.addClass("opened focused"),s.onSelectOpened.call(m)):(x.hide(),m.removeClass("opened dropup dropdown"),e("div.jq-selectbox").filter(".opened").length&&s.onSelectClosed.call(m)),k.length&&(k.val("").keyup(),j.hide(),k.keyup(function(){var t=e(this).val();q.each(function(){e(this).html().match(RegExp(".*?"+t+".*?","i"))?e(this).show():e(this).hide()}),""===r.first().text()&&""!==l.data("placeholder")&&q.first().hide(),1>q.filter(":visible").length?j.show():j.hide()})),q.filter(".selected").length&&(""===l.val()?y.scrollTop(0):(0!==y.innerHeight()/o%2&&(o/=2),y.scrollTop(y.scrollTop()+q.filter(".selected").position().top-y.innerHeight()/2+o))),a(y),!1}}),q.hover(function(){e(this).siblings().removeClass("selected")}),q.filter(".selected").text(),q.filter(":not(.disabled):not(.optgroup)").click(function(){l.focus();var t=e(this),i=t.text();if(!t.is(".selected")){var o=t.index(),o=o-t.prevAll(".optgroup").length;t.addClass("selected sel").siblings().removeClass("selected sel"),r.prop("selected",!1).eq(o).prop("selected",!0),w.text(i),m.data("jqfs-class")&&m.removeClass(m.data("jqfs-class")),m.data("jqfs-class",t.data("jqfs-class")),m.addClass(t.data("jqfs-class")),l.change()}x.hide(),m.removeClass("opened dropup dropdown"),s.onSelectClosed.call(m)}),x.mouseout(function(){e("li.sel",x).addClass("selected")}),l.on("change.styler",function(){w.text(r.filter(":selected").text()).removeClass("placeholder"),q.removeClass("selected sel").not(".optgroup").eq(l[0].selectedIndex).addClass("selected sel"),r.first().text()!=q.filter(".selected").text()?m.addClass("changed"):m.removeClass("changed")}).on("focus.styler",function(){m.addClass("focused"),e("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){m.removeClass("focused")}).on("keydown.styler keyup.styler",function(e){var t=q.data("li-height");""===l.val()?w.text(n).addClass("placeholder"):w.text(r.filter(":selected").text()),q.removeClass("selected sel").not(".optgroup").eq(l[0].selectedIndex).addClass("selected sel"),(38==e.which||37==e.which||33==e.which||36==e.which)&&(""===l.val()?y.scrollTop(0):y.scrollTop(y.scrollTop()+q.filter(".selected").position().top)),40!=e.which&&39!=e.which&&34!=e.which&&35!=e.which||y.scrollTop(y.scrollTop()+q.filter(".selected").position().top-y.innerHeight()+t),13==e.which&&(e.preventDefault(),x.hide(),m.removeClass("opened dropup dropdown"),s.onSelectClosed.call(m))}).on("keydown.styler",function(e){32==e.which&&(e.preventDefault(),C.click())}),void e(document).on("click",function(t){e(t.target).parents().hasClass("jq-selectbox")||"OPTION"==t.target.nodeName||(e("div.jq-selectbox").filter(".opened").length&&s.onSelectClosed.call(e("div.jq-selectbox").filter(".opened")),k.length&&k.val("").keyup(),x.hide().find("li.sel").addClass("selected"),m.removeClass("focused opened dropup dropdown"))}))}function n(){var s=new t,i=e("<div"+s.id+' class="jq-select-multiple jqselect'+s.classes+'"'+s.title+' style="display: inline-block; position: relative"></div>');l.css({margin:0,padding:0}).after(i),d(),i.append("<ul>"+h+"</ul>");var o=e("ul",i).css({position:"relative","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}),c=e("li",i).attr("unselectable","on"),s=l.attr("size"),n=o.outerHeight(),p=c.outerHeight();void 0!==s&&s>0?o.css({height:p*s}):o.css({height:4*p}),n>i.height()&&(o.css("overflowY","scroll"),a(o),c.filter(".selected").length&&o.scrollTop(o.scrollTop()+c.filter(".selected").position().top)),l.prependTo(i).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0}),l.is(":disabled")?(i.addClass("disabled"),r.each(function(){e(this).is(":selected")&&c.eq(e(this).index()).addClass("selected")})):(c.filter(":not(.disabled):not(.optgroup)").click(function(t){l.focus();var s=e(this);if(t.ctrlKey||t.metaKey||s.addClass("selected"),t.shiftKey||s.addClass("first"),t.ctrlKey||t.metaKey||t.shiftKey||s.siblings().removeClass("selected first"),(t.ctrlKey||t.metaKey)&&(s.is(".selected")?s.removeClass("selected first"):s.addClass("selected first"),s.siblings().removeClass("first")),t.shiftKey){var i=!1,o=!1;s.siblings().removeClass("selected").siblings(".first").addClass("selected"),s.prevAll().each(function(){e(this).is(".first")&&(i=!0)}),s.nextAll().each(function(){e(this).is(".first")&&(o=!0)}),i&&s.prevAll().each(function(){return e(this).is(".selected")?!1:void e(this).not(".disabled, .optgroup").addClass("selected")}),o&&s.nextAll().each(function(){return e(this).is(".selected")?!1:void e(this).not(".disabled, .optgroup").addClass("selected")}),1==c.filter(".selected").length&&s.addClass("first")}r.prop("selected",!1),c.filter(".selected").each(function(){var t=e(this),s=t.index();t.is(".option")&&(s-=t.prevAll(".optgroup").length),r.eq(s).prop("selected",!0)}),l.change()}),r.each(function(t){e(this).data("optionIndex",t)}),l.on("change.styler",function(){c.removeClass("selected");var t=[];r.filter(":selected").each(function(){t.push(e(this).data("optionIndex"))}),c.not(".optgroup").filter(function(s){return-1<e.inArray(s,t)}).addClass("selected")}).on("focus.styler",function(){i.addClass("focused")}).on("blur.styler",function(){i.removeClass("focused")}),n>i.height()&&l.on("keydown.styler",function(e){38!=e.which&&37!=e.which&&33!=e.which||o.scrollTop(o.scrollTop()+c.filter(".selected").position().top-p),40!=e.which&&39!=e.which&&34!=e.which||o.scrollTop(o.scrollTop()+c.filter(".selected:last").position().top-o.innerHeight()+2*p)}))}var r=e("option",l),h="";l.is("[multiple]")?o||i||n():c()};a(),l.on("refresh",function(){l.off(".styler").parent().before(l).remove(),a()})}}):l.is(":reset")&&l.on("click",function(){setTimeout(function(){l.closest(s.wrapper).find("input, select").trigger("refresh")},1)})}).promise().done(function(){s.onFormStyled.call()})}});